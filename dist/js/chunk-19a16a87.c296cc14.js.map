{"version":3,"sources":["webpack:///./src/views/page/productAdd.vue?07a5","webpack:///./src/components/basicForm.vue?d627","webpack:///src/components/basicForm.vue","webpack:///./src/components/basicForm.vue?fc9c","webpack:///./src/components/basicForm.vue","webpack:///./src/components/saleForm.vue?4429","webpack:///src/components/saleForm.vue","webpack:///./src/components/saleForm.vue?f284","webpack:///./src/components/saleForm.vue","webpack:///src/views/page/productAdd.vue","webpack:///./src/views/page/productAdd.vue?fe8b","webpack:///./src/views/page/productAdd.vue?d0fc","webpack:///./src/views/page/productAdd.vue?5dfd","webpack:///./src/api/product.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","current","_l","item","key","title","form","on","next","prev","handleSubmit","_e","staticRenderFns","ref","rules","span","wrapperCol","model","value","callback","$$v","$set","expression","changeCategory","c","id","_v","_s","name","staticStyle","resetForm","data","other","categoryList","itemsList","desc","category","items","tags","props","methods","addItem","console","log","push","$refs","ruleForm","validate","valid","resetFields","i","c_items","component","labelCol","$store","state","login","user","appkey","fileList","handlePreview","handleChange","length","previewVisible","handleCancel","previewImage","getBase64","file","Promise","reader","readAsDataURL","onload","onerror","created","images","map","status","response","url","filter","$emit","steps","price","price_off","inventory","unit","components","BasicForm","SaleForm","getCategory","params","request","get","res","getProducts","page","size","searchWord","deleteProduct","delete","addProduct","post","productDetail","eidtProduct","put"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,UAAU,CAACG,MAAM,CAAC,QAAUP,EAAIQ,UAAUR,EAAIS,GAAIT,EAAS,OAAE,SAASU,GAAM,OAAON,EAAG,SAAS,CAACO,IAAID,EAAKE,MAAML,MAAM,CAAC,MAAQG,EAAKE,YAAW,GAAGR,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAAkB,IAAhBN,EAAIQ,QAAeJ,EAAG,YAAY,CAACG,MAAM,CAAC,KAAOP,EAAIa,MAAMC,GAAG,CAAC,WAAad,EAAIe,QAAyB,IAAhBf,EAAIQ,QAAeJ,EAAG,WAAW,CAACG,MAAM,CAAC,KAAOP,EAAIa,MAAMC,GAAG,CAAC,WAAad,EAAIgB,KAAK,OAAShB,EAAIiB,gBAAgBjB,EAAIkB,MAAM,IAAI,IACjiBC,EAAkB,G,wBCDlB,G,UAAS,WAAa,IAAInB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,eAAe,CAACgB,IAAI,WAAWb,MAAM,CAAC,MAAQP,EAAIa,KAAK,MAAQb,EAAIqB,MAAM,YAAY,CAAEC,KAAM,GAAI,cAActB,EAAIuB,aAAa,CAACnB,EAAG,oBAAoB,CAACG,MAAM,CAAC,MAAQ,KAAK,KAAO,UAAU,CAACH,EAAG,UAAU,CAACoB,MAAM,CAACC,MAAOzB,EAAIa,KAAU,MAAEa,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAIa,KAAM,QAASc,IAAME,WAAW,iBAAiB,GAAGzB,EAAG,oBAAoB,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,SAAS,CAACH,EAAG,UAAU,CAACG,MAAM,CAAC,KAAO,YAAYiB,MAAM,CAACC,MAAOzB,EAAIa,KAAS,KAAEa,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAIa,KAAM,OAAQc,IAAME,WAAW,gBAAgB,GAAGzB,EAAG,oBAAoB,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,aAAa,CAACH,EAAG,WAAW,CAACU,GAAG,CAAC,OAASd,EAAI8B,gBAAgBN,MAAM,CAACC,MAAOzB,EAAIa,KAAa,SAAEa,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAIa,KAAM,WAAYc,IAAME,WAAW,kBAAkB7B,EAAIS,GAAIT,EAAgB,cAAE,SAAS+B,GAAG,OAAO3B,EAAG,kBAAkB,CAACO,IAAIoB,EAAEC,GAAGzB,MAAM,CAAC,MAAQwB,EAAEC,KAAK,CAAChC,EAAIiC,GAAG,IAAIjC,EAAIkC,GAAGH,EAAEI,MAAM,UAAS,GAAG/B,EAAG,WAAW,CAACgB,IAAI,OAAOb,MAAM,CAAC,KAAO,QAAQ,YAAc,UAAUiB,MAAM,CAACC,MAAOzB,EAAIa,KAAW,OAAEa,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAIa,KAAM,SAAUc,IAAME,WAAW,gBAAgB7B,EAAIS,GAAIT,EAAa,WAAE,SAASU,GAAM,OAAON,EAAG,kBAAkB,CAACO,IAAID,EAAKH,MAAM,CAAC,MAAQG,IAAO,CAACV,EAAIiC,GAAG,IAAIjC,EAAIkC,GAAGxB,GAAM,UAAS,IAAI,GAAGN,EAAG,oBAAoB,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,SAAS,CAACH,EAAG,WAAW,CAACgC,YAAY,CAAC,MAAQ,QAAQ7B,MAAM,CAAC,KAAO,OAAO,YAAc,QAAQ,gBAAgB,CAAC,aAAaiB,MAAM,CAACC,MAAOzB,EAAIa,KAAS,KAAEa,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAIa,KAAM,OAAQc,IAAME,WAAW,cAAc,CAACzB,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,aAAa,CAACP,EAAIiC,GAAG,iBAAiB,IAAI,GAAG7B,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,WAAWO,GAAG,CAAC,MAAQd,EAAIe,OAAO,CAACf,EAAIiC,GAAG,WAAW7B,EAAG,WAAW,CAACgC,YAAY,CAAC,OAAS,aAAatB,GAAG,CAAC,MAAQd,EAAIqC,YAAY,CAACrC,EAAIiC,GAAG,WAAW,KAC32D,EAAkB,G,YCkDtB,GACEK,KADF,WAEI,MAAO,CAELf,WAAY,CAAlB,SACMgB,MAAO,GACPC,aAAc,GACdC,UAAW,GACXpB,MAAO,CACLT,MAAO,CACf,CACU,UAAV,EACU,QAAV,UACU,QAAV,SAGQ8B,KAAM,CACd,CACU,UAAV,IAGQC,SAAU,CAClB,CACU,UAAV,EACU,QAAV,QACU,QAAV,SAGQC,MAAO,CACf,CACU,UAAV,IAGQC,KAAM,CACd,CACU,UAAV,EACU,QAAV,QACU,QAAV,YAMEC,MAAO,CAAC,QACR,QA5CF,WA4CA,gLACA,SADA,OAGA,GAFA,EADA,OAEA,sBACA,gBACA,qCACA,yCACA,uCANA,8CAWEC,QAAS,CACPC,QADJ,WAEMC,QAAQC,IAAI,WACZjD,KAAK2C,MAAMO,KAAK,YAAtB,oBAEIpC,KALJ,WAKA,WACMd,KAAKmD,MAAMC,SAASC,UAAS,SAAnC,GACQ,OAAIC,GACF,EAAV,4BACiB,IAETN,QAAQC,IAAI,iBACL,OAGXb,UAfJ,WAgBMpC,KAAKmD,MAAMC,SAASG,eAEtB1B,eAlBJ,SAkBA,GACM,IAAK,IAAX,oCACY7B,KAAKuC,aAAaiB,GAAGzB,KAAOW,IAC9B1C,KAAKwC,UAAYxC,KAAKuC,aAAaiB,GAAGC,YC/HmS,I,YCO/UC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QClBX,EAAS,WAAa,IAAI3D,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,eAAe,CAACgB,IAAI,WAAWb,MAAM,CAAC,MAAQP,EAAIa,KAAK,MAAQb,EAAIqB,MAAM,YAAYrB,EAAI4D,SAAS,cAAc5D,EAAIuB,aAAa,CAACnB,EAAG,oBAAoB,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,QAAQ,SAAW,KAAK,CAACH,EAAG,UAAU,CAACoB,MAAM,CAACC,MAAOzB,EAAIa,KAAU,MAAEa,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAIa,KAAM,QAASc,IAAME,WAAW,iBAAiB,GAAGzB,EAAG,oBAAoB,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,cAAc,CAACH,EAAG,UAAU,CAACoB,MAAM,CAACC,MAAOzB,EAAIa,KAAc,UAAEa,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAIa,KAAM,YAAac,IAAME,WAAW,qBAAqB,GAAGzB,EAAG,oBAAoB,CAACG,MAAM,CAAC,MAAQ,OAAO,SAAW,GAAG,KAAO,cAAc,CAACH,EAAG,UAAU,CAACoB,MAAM,CAACC,MAAOzB,EAAIa,KAAc,UAAEa,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAIa,KAAM,YAAac,IAAME,WAAW,qBAAqB,GAAGzB,EAAG,oBAAoB,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,OAAO,SAAW,KAAK,CAACH,EAAG,UAAU,CAACoB,MAAM,CAACC,MAAOzB,EAAIa,KAAS,KAAEa,SAAS,SAAUC,GAAM3B,EAAI4B,KAAK5B,EAAIa,KAAM,OAAQc,IAAME,WAAW,gBAAgB,GAAGzB,EAAG,oBAAoB,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,WAAW,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,OAAS,mDACnqCP,EAAI6D,OAAOC,MAAMC,MAAMC,KAAKC,OAAO,KAAO,SAAS,YAAY,eAAe,YAAYjE,EAAIkE,UAAUpD,GAAG,CAAC,QAAUd,EAAImE,cAAc,OAASnE,EAAIoE,eAAe,CAAEpE,EAAIkE,SAASG,OAAS,EAAGjE,EAAG,MAAM,CAACA,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,UAAUH,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACN,EAAIiC,GAAG,aAAa,GAAGjC,EAAIkB,KAAKd,EAAG,UAAU,CAACG,MAAM,CAAC,QAAUP,EAAIsE,eAAe,OAAS,MAAMxD,GAAG,CAAC,OAASd,EAAIuE,eAAe,CAACnE,EAAG,MAAM,CAACgC,YAAY,CAAC,MAAQ,QAAQ7B,MAAM,CAAC,IAAM,UAAU,IAAMP,EAAIwE,mBAAmB,IAAI,GAAGpE,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,WAAWO,GAAG,CAAC,MAAQd,EAAIgB,OAAO,CAAChB,EAAIiC,GAAG,WAAW7B,EAAG,WAAW,CAACgC,YAAY,CAAC,OAAS,aAAatB,GAAG,CAAC,MAAQd,EAAIe,OAAO,CAACf,EAAIiC,GAAG,WAAW,IAAI,IACprB,EAAkB,G,8BCqDtB,SAASwC,EAAUC,GACjB,OAAO,IAAIC,SAAQ,SAArB,KACI,IAAJ,iBACIC,EAAOC,cAAcH,GACrBE,EAAOE,OAAS,WAApB,oBACIF,EAAOG,QAAU,SAArB,mBAGA,OACEzC,KADF,WAEI,MAAO,CACLsB,SAAU,CAAhB,QACMrC,WAAY,CAAlB,SACM+C,gBAAgB,EAChBE,aAAc,GACdN,SAAU,GACV7C,MAAO,KAGXyB,MAAO,CAAC,QAERkC,QAbF,WAcQ/E,KAAKY,KAAKoE,OAAOZ,OAAS,IAC5BpE,KAAKiE,SAAWjE,KAAKY,KAAKoE,OAAOC,KAAI,SAA3C,YACA,MACA,+BACA,cACA,YAIEnC,QAAS,CAGPqB,aAHJ,YAGA,0BAEM,GAAoB,SAAhBM,EAAKS,OACPlF,KAAKY,KAAKoE,OAAO9B,KAAKuB,EAAKU,SAAS9C,KAAK+C,UACjD,yBACQ,IAAR,sBACQpF,KAAKY,KAAKoE,OAAShF,KAAKY,KAAKoE,OAAOK,QAAO,SAAnD,mBAGMrF,KAAKiE,SAAWA,GAElBK,aAdJ,WAeMtE,KAAKqE,gBAAiB,GAExBvD,KAjBJ,WAiBA,WACMd,KAAKmD,MAAMC,SAASC,UAAS,SAAnC,GACQ,OAAIC,GACF,EAAV,uBACUN,QAAQC,IAAI,QACL,IAETD,QAAQC,IAAI,mBACL,OAGXlC,KA5BJ,WA6BMf,KAAKsF,MAAM,aAActF,KAAKY,OAEhC,cA/BJ,SA+BA,oKACA,IACA,iBAFA,gCAGA,mBAHA,OAGA,UAHA,cAKA,gCACA,oBANA,gDCrHkV,ICO9U,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QCGf,GACEyB,KADF,WAEI,MAAO,CACL9B,QAAS,EACTgF,MAAO,CACb,CACQ,MAAR,WACQ,QAAR,iBAEA,CACQ,MAAR,WACQ,QAAR,iBAGM3E,KAAM,CACJD,MAAO,GACP8B,KAAM,GACNC,SAAU,GACVe,QAAS,GACTb,KAAM,GACN4C,MAAO,EACPC,UAAW,EACXC,UAAW,EACXC,KAAM,GACNX,OAAQ,GACRE,OAAQ,KAIdU,WAAY,CACVC,UAAJ,EACIC,SAAJ,GAEE,QAjCF,WAiCA,mKACA,sBACA,EAFA,gCAIA,UAJA,OAIA,EAJA,OAKA,eACA,SANA,8CASEhD,QAAS,CACPhC,KADJ,SACA,GACMd,KAAKO,SAAW,EAEhBP,KAAKY,KAAO,OAAlB,OAAkB,CAAlB,kBACA,WACA,IAGIG,KATJ,WAUMf,KAAKO,SAAW,GAElB,aAZJ,SAYA,+JACA,mBADA,uBAEA,2BAFA,SAGA,UAHA,oCAKA,2BALA,SAMA,UANA,OAQA,gBACA,qBATA,iDC3EmW,ICQ/V,G,UAAY,eACd,EACAT,EACAoB,GACA,EACA,KACA,WACA,OAIa,e,6CCnBf,W,6SCeO,SAAe6E,EAAtB,kC,8DAAO,WAA2BC,GAA3B,uGACaC,OAAQC,IAAI,gBAAiBF,GAD1C,cACCG,EADD,yBAEEA,GAFF,2C,wBAMA,SAAeC,IAAtB,+B,8DAAO,+HAA2BC,EAA3B,+BAAkC,EAAGC,EAArC,+BAA4C,GAAIC,EAAhD,+BAA6D,GAAI7D,EAAjE,+BAA4E,GAA5E,SACauD,OAAQC,IAAI,gBAAiB,CAC7CF,OAAQ,CACNK,OACAC,OACAC,aACA7D,cANC,cACCyD,EADD,yBASEA,GATF,2C,wBAaA,SAAeK,EAAtB,kC,8DAAO,WAA6BzE,GAA7B,uGACakE,OAAQQ,OAAR,oBAA4B1E,IADzC,cACCoE,EADD,yBAEEA,GAFF,2C,wBAMA,SAAeO,EAAtB,kC,8DAAO,WAA0BV,GAA1B,uGACaC,OAAQU,KAAK,gBAAiBX,GAD3C,cACCG,EADD,yBAEEA,GAFF,2C,wBAMA,SAAeS,EAAtB,kC,8DAAO,WAA6B7E,GAA7B,uGACakE,OAAQC,IAAR,oBAAyBnE,IADtC,cACCoE,EADD,yBAEEA,GAFF,2C,wBAMA,SAAeU,EAAtB,kC,8DAAO,WAA2Bb,GAA3B,uGACaC,OAAQa,IAAI,iBAAkBd,GAD3C,cACCG,EADD,yBAEEA,GAFF,2C","file":"js/chunk-19a16a87.c296cc14.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"product-add-container\"},[_c('a-steps',{attrs:{\"current\":_vm.current}},_vm._l((_vm.steps),function(item){return _c('a-step',{key:item.title,attrs:{\"title\":item.title}})}),1),_c('div',{staticClass:\"steps-content\"},[(_vm.current === 0)?_c('BasicForm',{attrs:{\"form\":_vm.form},on:{\"handleNext\":_vm.next}}):(_vm.current === 1)?_c('SaleForm',{attrs:{\"form\":_vm.form},on:{\"handlePrev\":_vm.prev,\"submit\":_vm.handleSubmit}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-form-model',{ref:\"ruleForm\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-col\":{ span: 5 },\"wrapper-col\":_vm.wrapperCol}},[_c('a-form-model-item',{attrs:{\"label\":\"标题\",\"prop\":\"title\"}},[_c('a-input',{model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品描述\",\"prop\":\"desc\"}},[_c('a-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.desc),callback:function ($$v) {_vm.$set(_vm.form, \"desc\", $$v)},expression:\"form.desc\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品类目\",\"prop\":\"category\"}},[_c('a-select',{on:{\"change\":_vm.changeCategory},model:{value:(_vm.form.category),callback:function ($$v) {_vm.$set(_vm.form, \"category\", $$v)},expression:\"form.category\"}},_vm._l((_vm.categoryList),function(c){return _c('a-select-option',{key:c.id,attrs:{\"value\":c.id}},[_vm._v(\" \"+_vm._s(c.name)+\" \")])}),1),_c('a-select',{ref:\"item\",attrs:{\"prop\":\"items\",\"placeholder\":\"请添加子类目\"},model:{value:(_vm.form.c_item),callback:function ($$v) {_vm.$set(_vm.form, \"c_item\", $$v)},expression:\"form.c_item\"}},_vm._l((_vm.itemsList),function(item){return _c('a-select-option',{key:item,attrs:{\"value\":item}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),1)],1),_c('a-form-model-item',{attrs:{\"label\":\"商品标签\",\"prop\":\"tags\"}},[_c('a-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"mode\":\"tags\",\"placeholder\":\"请选择标签\",\"default-value\":['包邮，最晚次日达']},model:{value:(_vm.form.tags),callback:function ($$v) {_vm.$set(_vm.form, \"tags\", $$v)},expression:\"form.tags\"}},[_c('a-select-option',{attrs:{\"value\":\"包邮，最晚次日达\"}},[_vm._v(\" 包邮，最晚次日达 \")])],1)],1),_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.next}},[_vm._v(\" 下一步 \")]),_c('a-button',{staticStyle:{\"margin\":\"20px 10px\"},on:{\"click\":_vm.resetForm}},[_vm._v(\" 重置 \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-form-model\n    ref=\"ruleForm\"\n    :model=\"form\"\n    :rules=\"rules\"\n    :label-col=\"{ span: 5 }\"\n    :wrapper-col=\"wrapperCol\"\n  >\n    <a-form-model-item label=\"标题\" prop=\"title\">\n      <a-input v-model=\"form.title\" />\n    </a-form-model-item>\n    <a-form-model-item label=\"商品描述\" prop=\"desc\">\n      <a-input v-model=\"form.desc\" type=\"textarea\" />\n    </a-form-model-item>\n    <a-form-model-item label=\"商品类目\" prop=\"category\">\n      <a-select v-model=\"form.category\" @change=\"changeCategory\">\n        <a-select-option v-for=\"c in categoryList\" :key=\"c.id\" :value=\"c.id\">\n          {{ c.name }}\n        </a-select-option>\n      </a-select>\n      <a-select\n        ref=\"item\"\n        v-model=\"form.c_item\"\n        prop=\"items\"\n        placeholder=\"请添加子类目\"\n      >\n        <a-select-option :value=\"item\" v-for=\"item in itemsList\" :key=\"item\">\n          {{ item }}\n        </a-select-option>\n      </a-select>\n    </a-form-model-item>\n    <a-form-model-item label=\"商品标签\" prop=\"tags\">\n      <a-select\n        mode=\"tags\"\n        style=\"width: 100%\"\n        v-model=\"form.tags\"\n        placeholder=\"请选择标签\"\n        :default-value=\"['包邮，最晚次日达']\"\n      >\n        <a-select-option value=\"包邮，最晚次日达\">\n          包邮，最晚次日达\n        </a-select-option>\n      </a-select>\n    </a-form-model-item>\n    <a-button type=\"primary\" @click=\"next\"> 下一步 </a-button>\n    <a-button style=\"margin: 20px 10px\" @click=\"resetForm\"> 重置 </a-button>\n  </a-form-model>\n</template>\n<script>\nimport * as api from '../api/product';\n\nexport default {\n  data() {\n    return {\n      //   labelCol: { span: 4 },\n      wrapperCol: { span: 14 },\n      other: '',\n      categoryList: [],\n      itemsList: [],\n      rules: {\n        title: [\n          {\n            required: true,\n            message: '请输入商品标签',\n            trigger: 'blur',\n          },\n        ],\n        desc: [\n          {\n            required: false,\n          },\n        ],\n        category: [\n          {\n            required: true,\n            message: '请选择类目',\n            trigger: 'blur',\n          },\n        ],\n        items: [\n          {\n            required: false,\n          },\n        ],\n        tags: [\n          {\n            required: true,\n            message: '请添加标签',\n            trigger: 'blur',\n          },\n        ],\n      },\n    };\n  },\n  props: ['form'],\n  async created() {\n    const resp = await api.getCategory();\n    this.categoryList = resp.data;\n    if (this.form.category) {\n      for (let i = 0; i < this.categoryList.length; i += 1) {\n        if (this.categoryList[i].id === this.form.category) {\n          this.itemsList = this.categoryList[i].c_items;\n        }\n      }\n    }\n  },\n  methods: {\n    addItem() {\n      console.log('addItem');\n      this.items.push(`New item ${this.i += 1}`);\n    },\n    next() {\n      this.$refs.ruleForm.validate((valid) => {\n        if (valid) {\n          this.$emit('handleNext', this.form);\n          return true;\n        }\n        console.log('error next!!');\n        return false;\n      });\n    },\n    resetForm() {\n      this.$refs.ruleForm.resetFields();\n    },\n    changeCategory(category) {\n      for (let i = 0; i < this.categoryList.length; i += 1) {\n        if (this.categoryList[i].id === category) {\n          this.itemsList = this.categoryList[i].c_items;\n        }\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./basicForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./basicForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./basicForm.vue?vue&type=template&id=1c066875&\"\nimport script from \"./basicForm.vue?vue&type=script&lang=js&\"\nexport * from \"./basicForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-form-model',{ref:\"ruleForm\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-col\":_vm.labelCol,\"wrapper-col\":_vm.wrapperCol}},[_c('a-form-model-item',{attrs:{\"label\":\"商品售价\",\"prop\":\"price\",\"required\":\"\"}},[_c('a-input',{model:{value:(_vm.form.price),callback:function ($$v) {_vm.$set(_vm.form, \"price\", $$v)},expression:\"form.price\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"折扣价格\",\"prop\":\"price_off\"}},[_c('a-input',{model:{value:(_vm.form.price_off),callback:function ($$v) {_vm.$set(_vm.form, \"price_off\", $$v)},expression:\"form.price_off\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品库存\",\"required\":\"\",\"prop\":\"inventory\"}},[_c('a-input',{model:{value:(_vm.form.inventory),callback:function ($$v) {_vm.$set(_vm.form, \"inventory\", $$v)},expression:\"form.inventory\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"计量单位\",\"prop\":\"unit\",\"required\":\"\"}},[_c('a-input',{model:{value:(_vm.form.unit),callback:function ($$v) {_vm.$set(_vm.form, \"unit\", $$v)},expression:\"form.unit\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品相册\",\"prop\":\"images\"}},[_c('a-upload',{attrs:{\"action\":'http://mallapi.duyiedu.com/upload/images?appkey=' +\n          _vm.$store.state.login.user.appkey,\"name\":\"avatar\",\"list-type\":\"picture-card\",\"file-list\":_vm.fileList},on:{\"preview\":_vm.handlePreview,\"change\":_vm.handleChange}},[(_vm.fileList.length < 8)?_c('div',[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_c('div',{staticClass:\"ant-upload-text\"},[_vm._v(\"Upload\")])],1):_vm._e(),_c('a-modal',{attrs:{\"visible\":_vm.previewVisible,\"footer\":null},on:{\"cancel\":_vm.handleCancel}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"alt\":\"example\",\"src\":_vm.previewImage}})])],1)],1),_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.prev}},[_vm._v(\" 上一步 \")]),_c('a-button',{staticStyle:{\"margin\":\"20px 10px\"},on:{\"click\":_vm.next}},[_vm._v(\" 提交 \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <a-form-model\n      ref=\"ruleForm\"\n      :model=\"form\"\n      :rules=\"rules\"\n      :label-col=\"labelCol\"\n      :wrapper-col=\"wrapperCol\"\n    >\n      <a-form-model-item label=\"商品售价\" prop=\"price\" required>\n        <a-input v-model=\"form.price\" />\n      </a-form-model-item>\n      <a-form-model-item label=\"折扣价格\" prop=\"price_off\">\n        <a-input v-model=\"form.price_off\" />\n      </a-form-model-item>\n      <a-form-model-item label=\"商品库存\" required prop=\"inventory\">\n        <a-input v-model=\"form.inventory\" />\n      </a-form-model-item>\n      <a-form-model-item label=\"计量单位\" prop=\"unit\" required>\n        <a-input v-model=\"form.unit\" />\n      </a-form-model-item>\n      <!-- 图片上传 -->\n      <a-form-model-item label=\"商品相册\" prop=\"images\">\n        <!-- name=\"avatar对应图片上传接口必传参数中的avatar字段 -->\n        <a-upload\n          :action=\"\n            'http://mallapi.duyiedu.com/upload/images?appkey=' +\n            $store.state.login.user.appkey\n          \"\n          name=\"avatar\"\n          list-type=\"picture-card\"\n          :file-list=\"fileList\"\n          @preview=\"handlePreview\"\n          @change=\"handleChange\"\n        >\n          <div v-if=\"fileList.length < 8\">\n            <a-icon type=\"plus\" />\n            <div class=\"ant-upload-text\">Upload</div>\n          </div>\n          <a-modal\n            :visible=\"previewVisible\"\n            :footer=\"null\"\n            @cancel=\"handleCancel\"\n          >\n            <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\n          </a-modal>\n        </a-upload>\n      </a-form-model-item>\n      <a-button type=\"primary\" @click=\"prev\"> 上一步 </a-button>\n      <a-button style=\"margin: 20px 10px\" @click=\"next\"> 提交 </a-button>\n    </a-form-model>\n  </div>\n</template>\n\n<script>\nfunction getBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = (error) => reject(error);\n  });\n}\nexport default {\n  data() {\n    return {\n      labelCol: { span: 4 },\n      wrapperCol: { span: 14 },\n      previewVisible: false,\n      previewImage: '',\n      fileList: [],\n      rules: {},\n    };\n  },\n  props: ['form'],\n  // 按照ant-design处理图片列表对象，用于编辑时的数据回填\n  created() {\n    if (this.form.images.length > 0) {\n      this.fileList = this.form.images.map((item, index) => ({\n        uid: index,\n        name: `image-${index}.png`,\n        status: 'done',\n        url: item,\n      }));\n    }\n  },\n  methods: {\n    // ?{ file, fileList，event }是change事件返回的数据，一个对象\n    // 上传图片后触发事件，将图片保存到images中\n    handleChange({ file, fileList }) {\n    //   console.log(file, fileList, event);\n      if (file.status === 'done') {\n        this.form.images.push(file.response.data.url);\n      } else if (file.status === 'removed') {\n        const { url } = file.response.data;\n        this.form.images = this.form.images.filter((item) => item !== url);\n      }\n      //  已上传的文件列表\n      this.fileList = fileList;\n    },\n    handleCancel() {\n      this.previewVisible = false;\n    },\n    next() {\n      this.$refs.ruleForm.validate((valid) => {\n        if (valid) {\n          this.$emit('submit', this.form);\n          console.log('提交了');\n          return true;\n        }\n        console.log('error submit!!');\n        return false;\n      });\n    },\n    prev() {\n      this.$emit('handlePrev', this.form);\n    },\n    async handlePreview(file) {\n      const obj = file;\n      if (!file.url && !file.preview) {\n        obj.preview = await getBase64(file.originFileObj);\n      }\n      this.previewImage = file.url || file.preview;\n      this.previewVisible = true;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./saleForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./saleForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./saleForm.vue?vue&type=template&id=055c0342&\"\nimport script from \"./saleForm.vue?vue&type=script&lang=js&\"\nexport * from \"./saleForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"product-add-container\">\n    <a-steps :current=\"current\">\n      <a-step v-for=\"item in steps\" :key=\"item.title\" :title=\"item.title\" />\n    </a-steps>\n    <div class=\"steps-content\">\n      <BasicForm v-if=\"current === 0\" :form=\"form\" @handleNext=\"next\" />\n      <SaleForm\n        v-else-if=\"current === 1\"\n        :form=\"form\"\n        @handlePrev=\"prev\"\n        @submit=\"handleSubmit\"\n      />\n    </div>\n  </div>\n</template>\n<script>\nimport BasicForm from '@/components/basicForm.vue';\nimport SaleForm from '@/components/saleForm.vue';\nimport * as api from '@/api/product';\n\nexport default {\n  data() {\n    return {\n      current: 0,\n      steps: [\n        {\n          title: '填写商品基本信息',\n          content: 'First-content',\n        },\n        {\n          title: '填写商品销售信息',\n          content: 'Last-content',\n        },\n      ],\n      form: {\n        title: '',\n        desc: '',\n        category: '',\n        c_items: [],\n        tags: [],\n        price: 0,\n        price_off: 0,\n        inventory: 0,\n        unit: '',\n        images: [],\n        status: 1,\n      },\n    };\n  },\n  components: {\n    BasicForm,\n    SaleForm,\n  },\n  async created() {\n    const { id } = this.$route.params;\n    if (id) {\n      // 读取商品详情\n      const resp = await api.productDetail(id);\n      console.log(resp);\n      this.form = resp;\n    }\n  },\n  methods: {\n    next(basicFormInfo) {\n      this.current += 1;\n      // form更新\n      this.form = {\n        ...this.form,\n        ...basicFormInfo,\n      };\n    },\n    prev() {\n      this.current -= 1;\n    },\n    async handleSubmit(allForm) {\n      if (this.$route.params.id) {\n        this.$message.success('修改成功');\n        await api.eidtProduct(allForm);\n      } else {\n        this.$message.success('新增成功');\n        await api.addProduct(allForm);\n      }\n      this.$router.push({\n        name: 'ProductList',\n      });\n      //   console.log(allForm);\n    },\n  },\n};\n</script>\n<style scoped>\n.product-add-container {\n  width: 50%;\n  margin: 20px auto;\n}\n.steps-content {\n  margin-top: 16px;\n  border: 1px dashed #e9e9e9;\n  border-radius: 6px;\n  background-color: #fafafa;\n  min-height: 200px;\n  text-align: center;\n  padding-top: 80px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./productAdd.vue?vue&type=template&id=747109fb&scoped=true&\"\nimport script from \"./productAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./productAdd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./productAdd.vue?vue&type=style&index=0&id=747109fb&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"747109fb\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productAdd.vue?vue&type=style&index=0&id=747109fb&scoped=true&lang=css&\"","import request from './request';\n\n// ?未在请求拦截处添加了appkey,需要这样传递请求参数\n// 查询类目列表信息\n// export async function getCategory(appkey = '', page = 1, size = 10) {\n//   const res = await request.get('/category/all', {\n//     params: {\n//       appkey,\n//       page,\n//       size,\n//     },\n//   });\n//   return res;\n// }\n// ?已经在请求拦截处添加了appkey,获取全部数据时,不加非必须数据 page,size，\nexport async function getCategory(params) {\n  const res = await request.get('/category/all', params);\n  return res;\n}\n\n// 查询产品列表\nexport async function getProducts(page = 1, size = 10, searchWord = '', category = '') {\n  const res = await request.get('/products/all', {\n    params: {\n      page,\n      size,\n      searchWord,\n      category,\n    },\n  });\n  return res;\n}\n\n// 删除商品\nexport async function deleteProduct(id) {\n  const res = await request.delete(`/products/${id}`);\n  return res;\n}\n\n// 新增商品\nexport async function addProduct(params) {\n  const res = await request.post('/products/add', params);\n  return res;\n}\n\n// 查询商品详情\nexport async function productDetail(id) {\n  const res = await request.get(`/products/${id}`);\n  return res;\n}\n\n// 编辑商品\nexport async function eidtProduct(params) {\n  const res = await request.put('/products/edit', params);\n  return res;\n}\n"],"sourceRoot":""}