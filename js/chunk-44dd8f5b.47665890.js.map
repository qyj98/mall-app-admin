{"version":3,"sources":["webpack:///./src/components/search.vue?74d9","webpack:///./src/components/productTable.vue?8438","webpack:///./src/views/page/productList.vue?b20a","webpack:///./src/components/search.vue?5c5d","webpack:///src/components/search.vue","webpack:///./src/components/search.vue?bd81","webpack:///./src/components/search.vue","webpack:///./src/components/productTable.vue?e4ad","webpack:///src/components/productTable.vue","webpack:///./src/components/productTable.vue?07db","webpack:///./src/components/productTable.vue","webpack:///src/views/page/productList.vue","webpack:///./src/views/page/productList.vue?388e","webpack:///./src/views/page/productList.vue","webpack:///./src/api/product.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","categoryList","on","handleSubmit","formList","pageInfo","handleChangePage","handleDelete","handleEidt","staticRenderFns","searchForm","nativeOn","$event","preventDefault","model","value","callback","$$v","$set","expression","staticStyle","handleChange","_l","c","key","id","_v","_s","name","isLoading","data","searchWord","category","props","require","default","methods","val","$emit","component","columns","list","page","scopedSlots","_u","fn","text","record","editProduct","showConfirm","formData","type","Array","computed","map","$confirm","title","content","onOk","onCancel","current","pageSize","showSizeChanger","total","searchFormList","categoryObj","components","Search","ProductTable","$router","push","params","rowInfo","getCategory","request","get","res","getProducts","size","deleteProduct","delete","addProduct","post","productDetail","eidtProduct","put"],"mappings":"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","file":"js/chunk-44dd8f5b.47665890.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&id=28b8aabd&lang=less&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productTable.vue?vue&type=style&index=0&id=5ffe7776&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"product-list-container\"},[_c('Search',{attrs:{\"categoryList\":_vm.categoryList},on:{\"submit\":_vm.handleSubmit}}),_c('ProductTable',{attrs:{\"formData\":_vm.formList,\"page\":_vm.pageInfo},on:{\"changePage\":_vm.handleChangePage,\"delete\":_vm.handleDelete,\"edit\":_vm.handleEidt}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"secrch-container\"},[_c('a-form-model',{attrs:{\"layout\":\"inline\",\"model\":_vm.searchForm},on:{\"submit\":_vm.handleSubmit},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('a-form-model-item',{staticClass:\"searchInp\",attrs:{\"label\":\"检索关键字\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入关键字\"},model:{value:(_vm.searchForm.searchWord),callback:function ($$v) {_vm.$set(_vm.searchForm, \"searchWord\", $$v)},expression:\"searchForm.searchWord\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品类目\"}},[_c('a-select',{staticStyle:{\"width\":\"200px\"},attrs:{\"allowClear\":\"\",\"show-search\":\"\",\"placeholder\":\"请选择商品类目\"},on:{\"change\":_vm.handleChange}},_vm._l((_vm.categoryList),function(c){return _c('a-select-option',{key:c.id,attrs:{\"value\":c.id}},[_vm._v(\" \"+_vm._s(c.name)+\" \")])}),1)],1),_c('a-form-model-item',[_c('a-button',{attrs:{\"type\":\"primary\",\"html-type\":\"submit\"}},[_vm._v(\" \"+_vm._s(_vm.isLoading ? \"搜索中...\" : \"搜索\")+\" \")])],1)],1),_c('router-link',{staticClass:\"add\",attrs:{\"to\":{name: 'ProductAdd'}}},[_vm._v(\"添加商品\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"secrch-container\">\n    <a-form-model\n      layout=\"inline\"\n      :model=\"searchForm\"\n      @submit=\"handleSubmit\"\n      @submit.native.prevent\n    >\n      <!-- 商品信息搜索框 -->\n      <a-form-model-item class=\"searchInp\" label=\"检索关键字\">\n        <a-input v-model=\"searchForm.searchWord\" placeholder=\"请输入关键字\">\n        </a-input>\n      </a-form-model-item>\n      <!-- 商品类目选择框 -->\n      <a-form-model-item label=\"商品类目\">\n        <a-select\n          allowClear\n          show-search\n          placeholder=\"请选择商品类目\"\n          style=\"width: 200px\"\n          @change=\"handleChange\"\n        >\n          <a-select-option :value=\"c.id\" v-for=\"c in categoryList\" :key=\"c.id\">\n            {{ c.name }}\n          </a-select-option>\n        </a-select>\n      </a-form-model-item>\n      <!-- 搜索按钮 -->\n      <a-form-model-item>\n        <a-button type=\"primary\" html-type=\"submit\">\n          {{ isLoading ? \"搜索中...\" : \"搜索\" }}\n        </a-button>\n      </a-form-model-item>\n    </a-form-model>\n    <router-link :to=\"{name: 'ProductAdd'}\" class=\"add\">添加商品</router-link>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  data() {\n    return {\n      searchForm: {\n        searchWord: '',\n        category: '',\n      },\n      isLoading: false,\n    };\n  },\n  props: {\n    categoryList: {\n      require: true,\n      default: [],\n    },\n  },\n  methods: {\n    handleChange(val) {\n      this.searchForm.category = val;\n    },\n    // 提交后表单搜索信息保存到仓库中\n    handleSubmit() {\n      this.isLoading = true;\n      this.$emit('submit', this.searchForm, (res) => {\n        this.isLoading = res;\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.secrch-container {\n  margin-left: 40px;\n  position: relative;\n  .searchInp {\n    margin-right: 40px;\n  }\n  .add{\n    position: absolute;\n    right: 50px;\n    top: 5px;\n    height: 30px;\n    padding: 0 10px;\n    color: #000;\n    line-height: 30px;\n    border: 1px solid;\n    background: #ccc;\n    &:hover{\n      background: #eee;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=28b8aabd&scoped=true&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=28b8aabd&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28b8aabd\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-table',{attrs:{\"columns\":_vm.columns,\"data-source\":_vm.list,\"pagination\":_vm.page},on:{\"change\":_vm.handleChangePage},scopedSlots:_vm._u([{key:\"operation\",fn:function(text, record){return [_c('div',[_c('button',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.editProduct(text, record)}}},[_vm._v(\"编辑\")]),_c('button',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.showConfirm(text, record)}}},[_vm._v(\"删除\")])])]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-table\n    :columns=\"columns\"\n    :data-source=\"list\"\n    :pagination=\"page\"\n    @change=\"handleChangePage\"\n  >\n    <template slot=\"operation\" slot-scope=\"text, record\">\n      <div>\n        <button class=\"btn\" @click=\"editProduct(text, record)\">编辑</button>\n        <button class=\"btn\" @click=\"showConfirm(text, record)\">删除</button>\n      </div>\n    </template>\n  </a-table>\n</template>\n<script>\nconst columns = [\n  {\n    title: 'id',\n    dataIndex: 'id',\n    key: '_id',\n  },\n  {\n    title: '标题',\n    dataIndex: 'title',\n    key: 'title',\n    ellipsis: true,\n  },\n  {\n    title: '描述',\n    dataIndex: 'desc',\n    key: 'desc',\n    ellipsis: true,\n  },\n  {\n    title: '类目',\n    dataIndex: 'categoryName',\n    key: 'category',\n    ellipsis: true,\n  },\n  {\n    title: '预售价格',\n    dataIndex: 'price',\n    key: 'price',\n    ellipsis: true,\n  },\n  {\n    title: '折扣价格',\n    dataIndex: 'price_off',\n    key: 'price_off',\n  },\n  {\n    title: '标签',\n    dataIndex: 'tags',\n    key: 'tags',\n  },\n  {\n    title: '限制购买数量',\n    dataIndex: 'inventory',\n    key: 'inventory',\n  },\n  {\n    title: '上架状态',\n    dataIndex: 'status', // ?该列下的数据索引自data-source中的status属性的值\n    key: 'status',\n    customRender: (text, record) => (record.status === 1 ? '上架' : '下架'), // ?修改列渲染\n  },\n  {\n    title: '操作',\n    dataIndex: 'name',\n    key: 'name',\n    scopedSlots: { customRender: 'operation' },\n  },\n];\n\nexport default {\n  props: {\n    formData: {\n      type: Array,\n      require: true,\n    },\n    page: {\n      require: true,\n    },\n  },\n  data() {\n    return {\n      columns,\n    };\n  },\n  computed: {\n    list() {\n      return this.formData.map((item) => ({\n        ...item,\n        key: item.id,\n      }));\n    },\n  },\n  methods: {\n    handleChangePage(page) {\n      this.$emit('changePage', page);\n    },\n    showConfirm(text, record) {\n      // console.log(text, record);\n      this.$confirm({\n        title: `确认删除商品${record.id}？`,\n        content: `${record.title}`,\n        onOk: () => {\n          this.$emit('delete', record.id);\n        },\n        onCancel() {},\n      });\n    },\n    editProduct(text, record) {\n      this.$emit('edit', record);\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.btn {\n  cursor: pointer;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./productTable.vue?vue&type=template&id=5ffe7776&scoped=true&\"\nimport script from \"./productTable.vue?vue&type=script&lang=js&\"\nexport * from \"./productTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./productTable.vue?vue&type=style&index=0&id=5ffe7776&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ffe7776\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"product-list-container\" ref=\"container\">\n    <!-- 内联检索表单 -->\n    <Search @submit=\"handleSubmit\" :categoryList=\"categoryList\" />\n    <!-- 商品列表table -->\n    <ProductTable\n      :formData=\"formList\"\n      :page=\"pageInfo\"\n      @changePage=\"handleChangePage\"\n      @delete=\"handleDelete\"\n      @edit=\"handleEidt\"\n    />\n  </div>\n</template>\n\n<script>\n// import { mapState } from 'vuex';\nimport Search from '@/components/search.vue';\nimport ProductTable from '@/components/productTable.vue';\nimport * as api from '@/api/product';\n\nexport default {\n  data() {\n    return {\n      formList: [],\n      pageInfo: {\n        current: 1,\n        pageSize: 10,\n        showSizeChanger: true,\n        total: 1,\n      },\n      searchFormList: {\n        searchWord: '',\n        category: '',\n      },\n      categoryList: [], // ?[{id:1, name:水果},{id:1, name:水果}, ...]\n      categoryObj: {}, // ?映射, {1: {id:1, name:水果}, 2: {id:1, name:水果}, ...}\n    };\n  },\n  components: {\n    Search,\n    ProductTable,\n  },\n  methods: {\n    async getTableData() {\n      // ?获取表单数据\n      const resp = await api.getProducts(\n        this.pageInfo.current,\n        this.pageInfo.pageSize,\n        this.searchFormList.searchWord,\n        this.searchFormList.category,\n      );\n      this.formList = resp.data;\n      // ?获取数据后要进行处理 给每一项数据加上categoryName属性,修改表格的类目列\n      this.formList = this.formList.map((item) => ({\n        ...item,\n        categoryName: this.categoryObj[item.category].name,\n      }));\n      this.pageInfo.total = resp.total;\n    },\n    async handleSubmit(searchForm, callback) {\n      //  点击搜索后重新获取数据,传递过来仓库中的关键字\n      this.pageInfo.current = 1;\n      this.pageInfo.pageSize = 10;\n      this.searchFormList = searchForm;\n      this.getTableData();\n      callback(false);\n    },\n    async handleChangePage(page) {\n      // 页码变化时重新获取数据\n      this.pageInfo = page;\n      await this.getTableData();\n      this.$bus.$emit('scrollToTop', 0);\n    },\n    async handleDelete(id) {\n      await api.deleteProduct(id);\n      // 获取表格数据\n      this.getTableData();\n    },\n    handleEidt(rowInfo) {\n      // 表格编辑\n      this.$router.push({\n        name: 'ProductEidt',\n        params: {\n          id: rowInfo.id,\n        },\n      });\n      // console.log(rowInfo);\n    },\n  },\n  // 进入页面获取全部数据\n  async created() {\n    // ?先获取类目数据,作为search组件的属性传递给她\n    const resp = await api.getCategory();\n    this.categoryList = resp.data;\n    // console.log(this.categoryList);\n    // ?获取了类目数据后做映射，把类目数组转化成对象，属性名为一个类目数据对象的id，值为一个类目数据对象整体\n    resp.data.forEach((item) => {\n      this.categoryObj[item.id] = item;\n    });\n    // console.log(this.categoryObj);\n    // 获取表格数据\n    this.getTableData();\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./productList.vue?vue&type=template&id=25af4f76&\"\nimport script from \"./productList.vue?vue&type=script&lang=js&\"\nexport * from \"./productList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from './request';\n\n// ?未在请求拦截处添加了appkey,需要这样传递请求参数\n// 查询类目列表信息\n// export async function getCategory(appkey = '', page = 1, size = 10) {\n//   const res = await request.get('/category/all', {\n//     params: {\n//       appkey,\n//       page,\n//       size,\n//     },\n//   });\n//   return res;\n// }\n// ?已经在请求拦截处添加了appkey,获取全部数据时,不加非必须数据 page,size，\nexport async function getCategory(params) {\n  const res = await request.get('/category/all', params);\n  return res;\n}\n\n// 查询产品列表\nexport async function getProducts(page = 1, size = 10, searchWord = '', category = '') {\n  const res = await request.get('/products/all', {\n    params: {\n      page,\n      size,\n      searchWord,\n      category,\n    },\n  });\n  return res;\n}\n\n// 删除商品\nexport async function deleteProduct(id) {\n  const res = await request.delete(`/products/${id}`);\n  return res;\n}\n\n// 新增商品\nexport async function addProduct(params) {\n  const res = await request.post('/products/add', params);\n  return res;\n}\n\n// 查询商品详情\nexport async function productDetail(id) {\n  const res = await request.get(`/products/${id}`);\n  return res;\n}\n\n// 编辑商品\nexport async function eidtProduct(params) {\n  const res = await request.put('/products/edit', params);\n  return res;\n}\n"],"sourceRoot":""}